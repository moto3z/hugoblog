---
title: "20230703 접근제어모델"
date: 2023-07-03T15:29:37+09:00
draft: true
---


## 개오
- 어떤 프로젝트를 만들면서 혹은 앞으로 만들 서비스들은 당연히 회원들에게 가치를 제공해주는 것이고, 모든 회원이 동일한 권한을 갖고있지는 않습니다.
- 회원정보 시스템 또는 계정계 시스템 (IAM System/Service) 를 만들면서 권한을 담당하고 제어하는 부분이 항상 고민이 될수밖에 없고 초창기에도 문제가 되지만 어느정도 회원숫자가 늘고 서비스가 활성화 된 뒤에도 언제든 이슈가 발생할 여지가 있고, 또 
- 개인적인 경험으로 IAM 시스템이 매력적인 이유는 "치명적" 이기 때문인데요 추가점수를 따거나 부가가치를 창출하는게 아니라, 장애의 영향도가 회사 전체 프로덕트에 파급될수 있습니다.


(ex) 관리자, 일반 유저, 결제한 회원등 )

 - 모델에 대한 이해를 바탕으로 시스템을 설계하고, 리팩토링 하면 좋을꺼 같아 정리 해봤습니다.

 

## MAC ( Mandatory Access Control )
- 강제적 접근 통제로, 자원에 대한 모든 권한을 관리자로부터 부여
- 관리자만 사용자, 객체에 대한 등급을 수정
- 관리자가 모든 사용자/객체에 대해 관리하므로 보안에 좋지만 관리하기 힘들다
- 관리자는 또 어떻게 관리할것인가 어떤것을 믿을것인가? (관리자의 ID/PW 를 안다고 해서 전권을 부여해도 괜찮은가?) 
- 사용예시 : 기밀 등 강력한 접근통제가 필요할때 사용하면 좋습니다. 
- 방화벽 등에서 사용하는 ACL (접근 제어 목록,access control list) 또는 액세스 제어 목록은 개체나 개체 속성에 적용되어 있는 허가 목록또한 MAC 모델에 따른것


 
## DAC ( Discretionary Access Control )
- 임의적 접근 통제로 데이터 소유자가 직접 접근권한을 부여하는 방식
- 실수로 많은 권한을 부여할수 있어 보안에 취약
- 사용예시 : 인스타그램 게시글 조회권한, 구글문서 
- 구글의 대부분의 B2C 웹 서비스들은 DAC 모델을 통제하고 [zanzibar](https://research.google/pubs/zanzibar-googles-consistent-global-authorization-system) 라는 이름의 시스템을 통해서 권한을 관리한다.
- zanzibar 논문을 기반으로 오픈소스 구현체  [Keto](https://github.com/ory/keto) : 롤,권한,퍼미션 관리, 구글 글로벌 권한 시스템인 Zanzibar의 오픈소스 구현체


## RBAC ( Role Based Access Control )
- 역할 기반 접근통제, 각 사용자는 하나 이상의 역할을 가지며 역할에 따라 권한이 부여됨
- 권한에 따른 기능들이 딱딱 정해지기 때문에 관리하기 편하면서 보안에도 좋습니다.
- 흔히 사용되는 "기밀등급" 3급 대외비 , 3급, 2급 .. 등 기밀등급에 따른 접근제한모델이 이 RBAC 을 바탕으로
- 웹서비스로 구현할때, 다양한 보안등급을 아래의 table 형태로 정의한다음 RBAC 으로 권한제어를 할 수 있습니다.

|  | 회원초대,삭제 | 회원 접속 히스토리 조회 | 회원 전체 리스트 조회 | 센터 입고확정 | 센터 출고확정 | 작업생성 | 작업 지시서 조회 | 작업수행완료처리 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| super-user | O | O | O | O | O | O | O | O |
| admin | X | O | O | O | O | O | O | O |
| manager | X | X | X | O | O | O | O | O |
| field-agent | X | X | X | O | X | O | O | O |
| kiosk-inbound | X | X | X | X | X | O | O | O |
| kiosk-outbound | X | X | X | X | X | X | O | O |
|  |  |  |  |  |  |  |  |  |

- 위처럼 RBAC 으로 Role 을 다양하게 해서 권한을 세밀하게 컨트롤할수도 있지만 Role 이 더 많아지는 문제를 피할수 없습니다. 그래서 행위별로 속성(Attribute) 를 정의해주는 ABAC 이 존재하는데요
 

## ABAC ( Attribute Based Access Control )
- 속성 기반 접근 제어, 사용자나 객체의 속성에 따라 권한을 부여한다.
- 다양한 조건과 규칙을 고려할수 있어서 유연하지만 복잡하다.



## 정리

|  | MAC | DAC | RBAC | ABAC |
| --- | --- | --- | --- | --- |
| 권한부여 | 시스템/관리자 | 각 데이터 소유자 | 시스템/관리자 | 시스템/관리자 |
| 접근결정 | 보안등급(Lable) | 신분(iden) | 역할(Role) | 속성(Attribute) |
| 정책변경유연성 | 고정적임 | 유연함(각자 알아서) | 단계적임 | 유연함+디테일 |
| 특징 | 안정적이고 중앙집중적, 중앙제어가 가능 | B2C 서비스 적용하기 좋음 | Role 변경은 쉽지만 벗어날수 없음 | 자유도가 가장 높지만 난이도가 높음 |
|  |  |  |  |  |

## 참고 / 더보기링크
- zanzibar : 구글 DAC 모델 구현체 논문링크 : https://research.google/pubs/zanzibar-googles-consistent-global-authorization-system
- keto : zanzibar 오픈소스 구현체 : https://github.com/ory/keto
