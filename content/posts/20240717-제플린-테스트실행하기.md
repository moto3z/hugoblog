---
title: "20240717 제플린 테스트실행하기"
date: 2024-07-17T16:20:59+09:00
draft: true
---

## 제플린 테스트 실행하기 

 ./mvnw clean package -DskipTests
```
[INFO] --- maven-site-plugin:3.12.1:attach-descriptor (attach-descriptor) @ zeppelin-distribution ---
[INFO] No site descriptor found: nothing to attach.
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary for Zeppelin 0.12.0-SNAPSHOT:
[INFO] 
[INFO] Zeppelin ........................................... SUCCESS [  0.813 s]
[INFO] Zeppelin: Tools .................................... SUCCESS [  0.304 s]
[INFO] Zeppelin: Common ................................... SUCCESS [  0.422 s]
[INFO] Zeppelin: Interpreter .............................. SUCCESS [ 10.934 s]
[INFO] Zeppelin: Interpreter Shaded ....................... SUCCESS [ 43.322 s]
[INFO] Zeppelin: Interpreter Parent ....................... SUCCESS [  0.108 s]
[INFO] Zeppelin: Jupyter Support .......................... SUCCESS [  0.324 s]
[INFO] Zeppelin: Test ..................................... SUCCESS [  0.151 s]
[INFO] Zeppelin: Zengine .................................. SUCCESS [  2.037 s]
[INFO] Zeppelin: Jupyter Interpreter ...................... SUCCESS [  4.236 s]
[INFO] Zeppelin: Jupyter Interpreter Shaded ............... SUCCESS [  2.669 s]
[INFO] Zeppelin: R ........................................ SUCCESS [ 18.227 s]
[INFO] Zeppelin: Groovy interpreter ....................... SUCCESS [  0.747 s]
[INFO] Zeppelin: Spark Parent ............................. SUCCESS [  0.093 s]
[INFO] Zeppelin: Spark Shims .............................. SUCCESS [  0.174 s]
[INFO] Zeppelin: Spark3 Shims ............................. SUCCESS [  0.666 s]
[INFO] Zeppelin: Python interpreter ....................... SUCCESS [  3.001 s]
[INFO] Zeppelin: Spark Interpreter ........................ SUCCESS [ 19.204 s]
[INFO] Zeppelin: Spark Scala Parent ....................... SUCCESS [  0.432 s]
[INFO] Zeppelin: Spark Interpreter Scala_2.12 ............. SUCCESS [  3.152 s]
[INFO] Zeppelin: Spark Interpreter Scala_2.13 ............. SUCCESS [  3.389 s]
[INFO] Zeppelin: Shell interpreter ........................ SUCCESS [  1.776 s]
[INFO] Zeppelin: Spark-Submit interpreter ................. SUCCESS [  2.078 s]
[INFO] Zeppelin: Markdown interpreter ..................... SUCCESS [  2.477 s]
[INFO] Zeppelin: MongoDB interpreter ...................... SUCCESS [  0.331 s]
[INFO] Zeppelin: Angular interpreter ...................... SUCCESS [  0.180 s]
[INFO] Zeppelin: Livy interpreter ......................... SUCCESS [  0.974 s]
[INFO] Zeppelin: HBase interpreter ........................ SUCCESS [  1.401 s]
[INFO] Zeppelin: JDBC interpreter ......................... SUCCESS [  1.395 s]
[INFO] Zeppelin: File System Interpreters ................. SUCCESS [  0.635 s]
[INFO] Zeppelin: Flink Parent ............................. SUCCESS [  0.079 s]
[INFO] Zeppelin: Flink Shims .............................. SUCCESS [  0.152 s]
[INFO] Zeppelin: Flink1.15 Shims .......................... SUCCESS [  1.694 s]
[INFO] Zeppelin: Flink1.16 Shims .......................... SUCCESS [  1.628 s]
[INFO] Zeppelin: Flink1.17 Shims .......................... SUCCESS [  1.664 s]
[INFO] Zeppelin: Flink Interpreter Scala_2.12 ............. SUCCESS [ 15.330 s]
[INFO] Zeppelin: Flink-Cmd interpreter .................... SUCCESS [  1.556 s]
[INFO] Zeppelin: InfluxDB interpreter ..................... SUCCESS [  0.610 s]
[INFO] Zeppelin: Apache Cassandra interpreter ............. SUCCESS [ 13.852 s]
[INFO] Zeppelin: Elasticsearch interpreter ................ SUCCESS [  3.132 s]
[INFO] Zeppelin: BigQuery interpreter ..................... SUCCESS [  0.899 s]
[INFO] Zeppelin: Alluxio interpreter ...................... SUCCESS [05:26 min]
[INFO] Zeppelin: Neo4j interpreter ........................ SUCCESS [  0.880 s]
[INFO] Zeppelin: Java interpreter ......................... SUCCESS [  0.275 s]
[INFO] Zeppelin: Sparql interpreter ....................... SUCCESS [  1.587 s]
[INFO] Zeppelin: Client ................................... SUCCESS [  0.140 s]
[INFO] Zeppelin: Client Examples .......................... SUCCESS [  0.105 s]
[INFO] Zeppelin: Server ................................... SUCCESS [  2.375 s]
[INFO] Zeppelin: web Application .......................... SUCCESS [ 41.643 s]
[INFO] Zeppelin: Plugins Parent ........................... SUCCESS [  0.304 s]
[INFO] Zeppelin: Plugin S3NotebookRepo .................... SUCCESS [  0.795 s]
[INFO] Zeppelin: Plugin GitHubNotebookRepo ................ SUCCESS [  0.483 s]
[INFO] Zeppelin: Plugin AzureNotebookRepo ................. SUCCESS [  0.375 s]
[INFO] Zeppelin: Plugin GCSNotebookRepo ................... SUCCESS [  0.620 s]
[INFO] Zeppelin: Plugin FileSystemNotebookRepo ............ SUCCESS [  0.570 s]
[INFO] Zeppelin: Plugin MongoNotebookRepo ................. SUCCESS [  0.515 s]
[INFO] Zeppelin: Plugin OSSNotebookRepo ................... SUCCESS [  0.517 s]
[INFO] Zeppelin: Plugin Kubernetes StandardLauncher ....... SUCCESS [  3.033 s]
[INFO] Zeppelin: Plugin Flink Launcher .................... SUCCESS [  0.650 s]
[INFO] Zeppelin: Plugin Docker Launcher ................... SUCCESS [  0.879 s]
[INFO] Zeppelin: Plugin Cluster Launcher .................. SUCCESS [  1.265 s]
[INFO] Zeppelin: Plugin Yarn Launcher ..................... SUCCESS [  0.521 s]
[INFO] Zeppelin: Packaging distribution ................... SUCCESS [  0.580 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  09:11 min
[INFO] Finished at: 2024-07-17T10:29:54+09:00
[INFO] ------------------------------------------------------------------------

```


메이븐 테스트 실행
./mvnw test



## 로컬실행
```
[ERROR] Failures: 
[ERROR]   ClusterSingleNodeTest.startCluster:83 expected: <true> but was: <false>
[ERROR] Errors: 
[ERROR]   TableDataProxyTest.testProxyTable:56 NullPointer Cannot invoke "org.apache.zeppelin.tabledata.Row.get()" because "row" is null
[INFO] 
[ERROR] Tests run: 106, Failures: 1, Errors: 1, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary for Zeppelin 0.12.0-SNAPSHOT:
[INFO] 
[INFO] Zeppelin ........................................... SUCCESS [  0.388 s]
[INFO] Zeppelin: Tools .................................... SUCCESS [  0.223 s]
[INFO] Zeppelin: Common ................................... SUCCESS [  0.076 s]
[INFO] Zeppelin: Interpreter .............................. FAILURE [06:05 min]
[INFO] Zeppelin: Interpreter Shaded ....................... SKIPPED
[INFO] Zeppelin: Interpreter Parent ....................... SKIPPED
[INFO] Zeppelin: Jupyter Support .......................... SKIPPED
[INFO] Zeppelin: Test ..................................... SKIPPED
[INFO] Zeppelin: Zengine .................................. SKIPPED
[INFO] Zeppelin: Jupyter Interpreter ...................... SKIPPED
[INFO] Zeppelin: Jupyter Interpreter Shaded ............... SKIPPED
[INFO] Zeppelin: R ........................................ SKIPPED
[INFO] Zeppelin: Groovy interpreter ....................... SKIPPED
[INFO] Zeppelin: Spark Parent ............................. SKIPPED
[INFO] Zeppelin: Spark Shims .............................. SKIPPED
[INFO] Zeppelin: Spark3 Shims ............................. SKIPPED
[INFO] Zeppelin: Python interpreter ....................... SKIPPED
[INFO] Zeppelin: Spark Interpreter ........................ SKIPPED
[INFO] Zeppelin: Spark Scala Parent ....................... SKIPPED
[INFO] Zeppelin: Spark Interpreter Scala_2.12 ............. SKIPPED
[INFO] Zeppelin: Spark Interpreter Scala_2.13 ............. SKIPPED
[INFO] Zeppelin: Shell interpreter ........................ SKIPPED
[INFO] Zeppelin: Spark-Submit interpreter ................. SKIPPED
[INFO] Zeppelin: Markdown interpreter ..................... SKIPPED
[INFO] Zeppelin: MongoDB interpreter ...................... SKIPPED
[INFO] Zeppelin: Angular interpreter ...................... SKIPPED
[INFO] Zeppelin: Livy interpreter ......................... SKIPPED
[INFO] Zeppelin: HBase interpreter ........................ SKIPPED
[INFO] Zeppelin: JDBC interpreter ......................... SKIPPED
[INFO] Zeppelin: File System Interpreters ................. SKIPPED
[INFO] Zeppelin: Flink Parent ............................. SKIPPED
[INFO] Zeppelin: Flink Shims .............................. SKIPPED
[INFO] Zeppelin: Flink1.15 Shims .......................... SKIPPED
[INFO] Zeppelin: Flink1.16 Shims .......................... SKIPPED
[INFO] Zeppelin: Flink1.17 Shims .......................... SKIPPED
[INFO] Zeppelin: Flink Interpreter Scala_2.12 ............. SKIPPED
[INFO] Zeppelin: Flink-Cmd interpreter .................... SKIPPED
[INFO] Zeppelin: InfluxDB interpreter ..................... SKIPPED
[INFO] Zeppelin: Apache Cassandra interpreter ............. SKIPPED
[INFO] Zeppelin: Elasticsearch interpreter ................ SKIPPED
[INFO] Zeppelin: BigQuery interpreter ..................... SKIPPED
[INFO] Zeppelin: Alluxio interpreter ...................... SKIPPED
[INFO] Zeppelin: Neo4j interpreter ........................ SKIPPED
[INFO] Zeppelin: Java interpreter ......................... SKIPPED
[INFO] Zeppelin: Sparql interpreter ....................... SKIPPED
[INFO] Zeppelin: Client ................................... SKIPPED
[INFO] Zeppelin: Client Examples .......................... SKIPPED
[INFO] Zeppelin: Server ................................... SKIPPED
[INFO] Zeppelin: web Application .......................... SKIPPED
[INFO] Zeppelin: Plugins Parent ........................... SKIPPED
[INFO] Zeppelin: Plugin S3NotebookRepo .................... SKIPPED
[INFO] Zeppelin: Plugin GitHubNotebookRepo ................ SKIPPED
[INFO] Zeppelin: Plugin AzureNotebookRepo ................. SKIPPED
[INFO] Zeppelin: Plugin GCSNotebookRepo ................... SKIPPED
[INFO] Zeppelin: Plugin FileSystemNotebookRepo ............ SKIPPED
[INFO] Zeppelin: Plugin MongoNotebookRepo ................. SKIPPED
[INFO] Zeppelin: Plugin OSSNotebookRepo ................... SKIPPED
[INFO] Zeppelin: Plugin Kubernetes StandardLauncher ....... SKIPPED
[INFO] Zeppelin: Plugin Flink Launcher .................... SKIPPED
[INFO] Zeppelin: Plugin Docker Launcher ................... SKIPPED
[INFO] Zeppelin: Plugin Cluster Launcher .................. SKIPPED
[INFO] Zeppelin: Plugin Yarn Launcher ..................... SKIPPED
[INFO] Zeppelin: Packaging distribution ................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  06:06 min
[INFO] Finished at: 2024-07-17T10:38:27+09:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.2.2:test (default-test) on project zeppelin-interpreter: There are test failures.
[ERROR] 
[ERROR] Please refer to /Users/kep-dong22/zeppelin/zeppelin-interpreter/target/surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <args> -rf :zeppelin-interpreter

```

참고문서 : 
https://zeppelin.apache.org/docs/0.6.0/install/install.html






테스트실패시

10:51:50,565  WARN [Thread-11] org.apache.zeppelin.cluster.ClusterManager:266 - Raft incomplete initialization! retry[1800]
10:51:50,584 ERROR [Thread-12] org.apache.zeppelin.cluster.ClusterManager:341 - Raft incomplete initialization!



[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary for Zeppelin 0.12.0-SNAPSHOT:
[INFO] 
[INFO] Zeppelin ........................................... SUCCESS [  0.358 s]
[INFO] Zeppelin: Tools .................................... SUCCESS [  0.201 s]
[INFO] Zeppelin: Common ................................... SUCCESS [  0.065 s]
[INFO] Zeppelin: Interpreter .............................. FAILURE [06:04 min]
[INFO] Zeppelin: Interpreter Shaded ....................... SKIPPED
[INFO] Zeppelin: Interpreter Parent ....................... SKIPPED
[INFO] Zeppelin: Jupyter Support .......................... SKIPPED
[INFO] Zeppelin: Test ..................................... SKIPPED


>>>


./mvnw clean package -DskipTests && \
./mvnw clean install -DskipTests && \
./bin/zeppelin-daemon.sh restart && \
./mvnw test



${HOME} /Library/Java/JavaVirtualMachines/${모든디렉토리=*}/Contents/Home 



>> JDK 버전을 11로 맞춰두고 실행하면 OK 


echo 'eval "$(jenv init -)"' >> ~/.zshrc





./mvnw test -DtestFailureIgnore=true
./mvnw -Dparallel=classes -DthreadCount=4 


- 합쳐서
./mvnw -Dparallel=classes -DthreadCount=4 test -DtestFailureIgnore=true

```
parallel 옵션에는 다음과 같은 값들이 올 수 있습니다:

suites: 테스트 스위트를 병렬로 실행
classes: 테스트 클래스를 병렬로 실행
methods: 테스트 메서드를 병렬로 실행
```



 INFO [2024-07-18 09:06:39,350] ({Exec Stream Pumper} ProcessLauncher.java[processLine]:193) - [INFO] Interpreter launch command: /Users/kep-dong22/.jenv/versions/temurin64-11.0.23/bin/java -Dfile.encoding=UTF-8 -Dlog4j.configuration=file:///Users/kep-dong22/zeppelin/conf/log4j.properties -Dlog4j.configurationFile=file:///Users/kep-dong22/zeppelin/conf/log4j2.properties -Dzeppelin.log.file=/Users/kep-dong22/zeppelin/logs/zeppelin-interpreter-test-shared_process-kep-dong22-dong22.local.log -Xmx1024m -cp '':/Users/kep-dong22/zeppelin/zeppelin-zengine/../local-repo/test/*:/Users/kep-dong22/zeppelin/zeppelin-zengine/../interpreter_RemoteSchedulerTest/test/*:/Users/kep-dong22/zeppelin/zeppelin-interpreter-shaded/target/*:/Users/kep-dong22/zeppelin/zeppelin-zengine/target/test-classes/*:::/Users/kep-dong22/zeppelin/interpreter/zeppelin-interpreter-shaded-0.12.0-SNAPSHOT.jar:/Users/kep-dong22/zeppelin/zeppelin-interpreter/target/classes:/Users/kep-dong22/zeppelin/zeppelin-zengine/target/test-classes org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer 192.168.0.2 63614 test-shared_process :






[INFO] Results:
[INFO] 
[ERROR] Failures: 
[ERROR]   HeliumBundleFactoryTest.testInstallNpm:60 expected: <true> but was: <false>
[ERROR]   NotebookTest.testSchedule:656 expected: not <null>
[ERROR]   NotebookTest.testScheduleDisabledWithName:820 expected: <true> but was: <false>
[ERROR]   NotebookTest.testSchedulePoolUsage:735 expected: <true> but was: <false>
[ERROR] Errors: 
[ERROR]   HeliumBundleFactoryTest.bundleLocalPackage:119 » IO com.github.eirslett.maven.plugins.frontend.lib.TaskRunnerException: 'yarn install --fetch-retries=2 --fetch-retry-factor=1 --fetch-retry-mintimeout=5000 --registry=https://registry.npmjs.org/' failed.
[ERROR]   HeliumBundleFactoryTest.bundlePackage:94 » IO com.github.eirslett.maven.plugins.frontend.lib.TaskRunnerException: 'npm pack zeppelin-bubblechart@0.0.3 --registry=https://registry.npmjs.org/' failed.
[ERROR]   HeliumBundleFactoryTest.downloadPackage:77 » TaskRunner 'npm install lodash@3.9.3 --fetch-retries=2 --fetch-retry-factor=1 --fetch-retry-mintimeout=5000 --registry=https://registry.npmjs.org/' failed.
[ERROR]   HeliumBundleFactoryTest.switchVersion:183 » IO com.github.eirslett.maven.plugins.frontend.lib.TaskRunnerException: 'npm pack zeppelin-bubblechart@0.0.3 --registry=https://registry.npmjs.org/' failed.
[INFO] 
[ERROR] Tests run: 251, Failures: 4, Errors: 4, Skipped: 6
[INFO] 



nvm 18