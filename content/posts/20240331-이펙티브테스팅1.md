---
title: "20240331 이펙티브테스팅1"
date: 2024-03-31T23:10:36+09:00
draft: true
---

## 이펙티브테스팅1 단윈 요약

- https://haeguri.github.io/2019/11/30/book-effective-unit-testing/
- [이펙티브 테스팅](https://m.yes24.com/Goods/Detail/117586096) 1장을 읽고
- 다루는 내용
  - 테스트가 중요한 이유
  - 테스트가 어려운 이유
  - 버그의 존재는 필연적인 이유

## 테스트의 필요성 && 테스트코드는 작성 해야함
- 개발만 한다고 끝이 아니라 시스템 품질에도 책임져야한다.
- 테스트코드를 만드는 과정에서 아키텍쳐에 대한 피드백도 얻을 수 있다
  - 왜냐하면 좋은 설계는 테스트가 쉽기 때문
- 테스트코드를 작성하지 않을 핑계는 많다. 바쁘다.. 시간이 오래걸린다.. 등등
  - 개발자로서 만드는 제품의 품질은 개발자 책임
  - 책임감을 갖는데 도움을 주는 유일한 도구가 테스트코드
  - "효율적" 이고 "체계적" 으로 만들어야하는데 구체적인것들은 뒤에서 자세히 다룸

## 예시 : 플레닝 포커 구현하면서 테스트코드 설명함
- NPE 에러 나고, if-else 문으로 땜빵하다 에러터지는 예시 보여줌
- 테스트코드 없이 수동테스트하면 발견 못할수도 있음 "직감을 따르는" 임시방편이 수동테스트임.
- 수동테스트에 의존하면 안되는 이유
  - 코너케이스 빼먹는경우가 많음 >> 수동테스트하는 사람의 직감을 따르는 임시방편임
  - 테스트케이스를 체계적으로 도출해서 테스트코드 작성해야함
  - 테스트코드를 작성해서 반복적인 테스트를 자동화하자
- 예외는 꼭 구체타입으로 던지자(8p)
- 버그는 경계를 좋아한다. >> 코너케이스고 꼭 빼먹는 경우가 많으니까 테스트 작성하라는 의도인듯
- 속성기반 테스트 >> 이거 뭔지 잘 모르겠음. 입력 출력 정해놓고 뭔가 하는거같긴한데 // @Todo

## 효율적으로 테스트코드 작성하는법
- 효율적으로 테스트코드 작성하는방법은? >> 도메인테스트를 작성하는것이다
  - 도메인 테스트란 = 비지니스 요구사항을 테스트하는것
- @Todo 잘모름 : 예제기반테스트 / 속성기반 테스트 : 같은거같은데.. 다른게 뭔지 모르겠음
- - 구조적 테스트, 계약, 사전조건, 사후조건 : 인터페이스 만들어놓고 입력 출력 대비해서 로직 잘 도는지 테스트해보라는 의미인듯 ? (추정..)
- ***개발 과정에서의 테스트하기***
  - 테스트하기 쉽게 소프트웨어 설계하기 어렵다
  - 테스트 가능성을 염두해둬서 설계하자
  - 테스트가 좋은 이유중에 큰 비중으로 ***"테스트하기 쉬운 코드가 좋은 코드이고 그렇게 쉽게 테스트할수 있는 아키텍쳐를 만들수있도록 테스트가능성이 피드백을 줌" 이라는 의미*** 라고 생각합니다.
- 앞으로 할것 배울것 키워드
  - 도메인테스트,. 경계테스트, 구조적테스트, 대규모테스트, 돌연변이테스트 등등..
- 회귀적으로 테스트를 구성하면 테스트코드를 잘 작성할수 있고 설계도 좋아짐 (책 17p, 1.2.2 반복 프로세스로서의 효율적 테스트 ) 
  - 3단계를 (설계-요구사항분석-테스트작성 ) 회귀적으로 반복적이게 자유롭게 앞뒤로 단계를 이동하며 테스트를 구성하고 요구사항을 분석하고 재설계하고 테스트코드 작성하라고 함 
  - ***설계-요구사항분석-테스트작성 : 자유롭게 앞뒤로 왔다갔다 하면서 기법의 순서를 바뀌보자 17p*** 
- 개발에 먼저 집중하고 나서 테스트하기 : 개발먼저하던 테스트먼저하던 순서는 중요하지 않은데, 개발할때랑 테스트코드 작성할떄랑은 분리해서 진행해라 >> 클린아키텍쳐에서 안전모드랑 개발모드 분리해서 움직이라는거랑 비슷한 느낌인거같슴다.
- ***완벽한 설계는 불가능하다*** >> 그러니까 테스트코드를 작성하고 설계도 계속 수정될꺼임
- (1.2.7 테스트자동화의역할)  ***테스트 케이스 설계가 제일 중요하다 ***
  - ***의미있는 테스트코드를 만들기가 어렵고 제일 중요하다*** 의미있는 입력/출력값도 설정해야하고 진짜 중요한 부분을 테스트할수 있도록 설계도 해야하고

## 효율적인 테스트와 체계적인 테스트에 대하여
- 효율적인 테스트코드라는 의미 : 올바른 테스트를 작성하는데 집중하자
  - 내생각 : 의미있는 테스트코드 만들어라 : 의미없는 테스트코드 만드는데 리소스 낭비하지 말기
  - ***테스트코드도 만능은 아니고 트레이드 오프가 있음. 결국 중요한건 실용주의***
- 체계적인 테스트코드의 의미
  - 어떤 기능/부분(코드조각) 에 대해서 검증하고자 할때, 누가하더라도(어떤 개발자가 테스트코드를 작성하더라도) 똑같은 테스트스위트를 만들어내는것을 의미

## 테스트코드 만들기 어려운 이유
- 완벽할수 없기때문에 : 그래서 적당히 트레이드 오프 곡선에서 효율적인 구간에서만 테스트 작성해라
- 살충제 역설 : 벌레 예방하려고 살충제를 살포하면 당장은 벌레가 사라지는것처럼 보이는데, 살충제에 내성을가지는 슈퍼짱쎈벌레가 튀어나옴. 테스트를 빡세게 잘 만들어도 그 모든 테케를 통과하는 교묘하고 어려운 버그가 등장하기 마련

## 이외
- 단위, 시스템, 통합 테스트 있음
- 단위테스트 짱이니까 단위테스트 많이 만들어라 (비약이 심한데, 22-29p 읽어보면 충분히 다른 좋은 내용들이 많습니다..)
- "구글 엔지니어는 이렇게 일한다" << 이책 읽어봐라 구글도 80%는 단위테스트임 (31p)
- ***1단윈 한줄요약 : 어차피 테스트코드 아무리 빡세게 짜도 버그는 발생하기 마련이다 그러니까 적당히 효율적으로 짜라 = 실용주의적으로 테스트 하셈 = 단위테스트로 짜고, 비지니스로직에 대한 테스트를 작성***